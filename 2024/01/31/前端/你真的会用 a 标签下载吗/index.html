<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>å‰ç«¯/ä½ çœŸçš„ä¼šç”¨ a æ ‡ç­¾ä¸‹è½½å— | å°é»‘çš„å°ç«™</title><meta name="description" content="åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½è®°å½•ä¸€ä¸‹æœ€è¿‘å†™çš„ä¸‹è½½æ–¹æ³•,åœ¨éåŒæºè¯·æƒ…å†µä¸‹å¯ä»¥å°†èµ„æºå½“æˆäºŒè¿›åˆ¶çš„ blob å…ˆæ‹¿åˆ°æ‰‹ï¼Œå†è¿›è¡Œ&lt;a&gt; çš„ä¸‹è½½å¤„ç†ã€‚ å¦‚æœåç«¯ä¸šåŠ¡ä¸Šæœ‰é—®é¢˜ä¼šæå‰æŠ›é”™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç»ˆæ­¢ä¸‹è½½ï¼Œç»™äºˆé”™è¯¯æç¤ºã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435"><meta name="author" content="å°é»‘"><meta name="copyright" content="å°é»‘"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="å‰ç«¯/ä½ çœŸçš„ä¼šç”¨ a æ ‡ç­¾ä¸‹è½½å—"><meta name="twitter:description" content="åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½è®°å½•ä¸€ä¸‹æœ€è¿‘å†™çš„ä¸‹è½½æ–¹æ³•,åœ¨éåŒæºè¯·æƒ…å†µä¸‹å¯ä»¥å°†èµ„æºå½“æˆäºŒè¿›åˆ¶çš„ blob å…ˆæ‹¿åˆ°æ‰‹ï¼Œå†è¿›è¡Œ&lt;a&gt; çš„ä¸‹è½½å¤„ç†ã€‚ å¦‚æœåç«¯ä¸šåŠ¡ä¸Šæœ‰é—®é¢˜ä¼šæå‰æŠ›é”™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç»ˆæ­¢ä¸‹è½½ï¼Œç»™äºˆé”™è¯¯æç¤ºã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435"><meta name="twitter:image" content="http://yoursite.com/img/mysql.jpeg"><meta property="og:type" content="article"><meta property="og:title" content="å‰ç«¯/ä½ çœŸçš„ä¼šç”¨ a æ ‡ç­¾ä¸‹è½½å—"><meta property="og:url" content="http://yoursite.com/2024/01/31/%E5%89%8D%E7%AB%AF/%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E7%94%A8%20a%20%E6%A0%87%E7%AD%BE%E4%B8%8B%E8%BD%BD%E5%90%97/"><meta property="og:site_name" content="å°é»‘çš„å°ç«™"><meta property="og:description" content="åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½è®°å½•ä¸€ä¸‹æœ€è¿‘å†™çš„ä¸‹è½½æ–¹æ³•,åœ¨éåŒæºè¯·æƒ…å†µä¸‹å¯ä»¥å°†èµ„æºå½“æˆäºŒè¿›åˆ¶çš„ blob å…ˆæ‹¿åˆ°æ‰‹ï¼Œå†è¿›è¡Œ&lt;a&gt; çš„ä¸‹è½½å¤„ç†ã€‚ å¦‚æœåç«¯ä¸šåŠ¡ä¸Šæœ‰é—®é¢˜ä¼šæå‰æŠ›é”™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç»ˆæ­¢ä¸‹è½½ï¼Œç»™äºˆé”™è¯¯æç¤ºã€‚ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435"><meta property="og:image" content="http://yoursite.com/img/mysql.jpeg"><meta property="article:published_time" content="2024-01-31T02:40:42.880Z"><meta property="article:modified_time" content="2024-01-31T03:24:53.518Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://yoursite.com/2024/01/31/%E5%89%8D%E7%AB%AF/%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E7%94%A8%20a%20%E6%A0%87%E7%AD%BE%E4%B8%8B%E8%BD%BD%E5%90%97/"><link rel="prev" title="æ‚é¡¹/macå·¥å…·æ¨è" href="http://yoursite.com/2024/02/08/%E6%9D%82%E9%A1%B9/mac%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"><link rel="next" title="æ‚é¡¹/ä¸€å¥—é”®é¼ æ§åˆ¶ win å’Œ mac" href="http://yoursite.com/2024/01/26/%E6%9D%82%E9%A1%B9/%E4%B8%80%E5%A5%97%E9%94%AE%E9%BC%A0%E6%8E%A7%E5%88%B6%20win%20%E5%92%8C%20mac/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://ynxh.xyz","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"æŒ‰","message_next":"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">127</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> æ¸…å•</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½"><span class="toc-number">1.</span> <span class="toc-text">åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„-txt-æ ¼å¼æ–‡ä»¶"><span class="toc-number">1.1.</span> <span class="toc-text">æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„ txt æ ¼å¼æ–‡ä»¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#a-æ ‡ç­¾-download"><span class="toc-number">1.2.</span> <span class="toc-text">a æ ‡ç­¾ download</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å°è£…ä¸‹è½½æ–¹æ³•"><span class="toc-number">1.2.1.</span> <span class="toc-text">å°è£…ä¸‹è½½æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Firefox-ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">Firefox ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#download-ä½¿ç”¨æ³¨æ„ç‚¹"><span class="toc-number">1.2.2.</span> <span class="toc-text">download ä½¿ç”¨æ³¨æ„ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-åŒæº-URL-çš„é™åˆ¶"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">1. åŒæº URL çš„é™åˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-ä¸èƒ½æºå¸¦-Header"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2. ä¸èƒ½æºå¸¦ Header</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-download-ä¸-Content-Disposition-çš„ä¼˜å…ˆçº§"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">3. download ä¸ Content-Disposition çš„ä¼˜å…ˆçº§</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Content-Disposition"><span class="toc-number">1.3.</span> <span class="toc-text">Content-Disposition</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#inline"><span class="toc-number">1.3.1.</span> <span class="toc-text">inline</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attachment"><span class="toc-number">1.3.2.</span> <span class="toc-text">attachment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-a-gt-æ ‡ç­¾-VS-Content-Disposition"><span class="toc-number">1.3.3.</span> <span class="toc-text">&lt;a&gt;æ ‡ç­¾ VS Content-Disposition</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Blob-è½¬æ¢"><span class="toc-number">1.4.</span> <span class="toc-text">Blob è½¬æ¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–¹æ³•-1-ç”¨ä½œ-URLï¼ˆblob-ï¼‰"><span class="toc-number">1.4.1.</span> <span class="toc-text">æ–¹æ³• 1. ç”¨ä½œ URLï¼ˆblob:ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ–¹æ³•-2-è½¬æ¢ä¸º-base64ï¼ˆdata-ï¼‰"><span class="toc-number">1.4.2.</span> <span class="toc-text">æ–¹æ³• 2. è½¬æ¢ä¸º base64ï¼ˆdata:ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”"><span class="toc-number">1.4.3.</span> <span class="toc-text">ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#responseType"><span class="toc-number">1.4.4.</span> <span class="toc-text">responseType</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Content-Type-ä¸-MIME-å—…æ¢"><span class="toc-number">1.5.</span> <span class="toc-text">Content-Type ä¸ MIME å—…æ¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FAQï¼ša-download-å¤±æ•ˆæ’æŸ¥åŸå› "><span class="toc-number">1.6.</span> <span class="toc-text">FAQï¼ša download å¤±æ•ˆæ’æŸ¥åŸå› </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">1.7.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒèµ„æ–™"><span class="toc-number">1.8.</span> <span class="toc-text">å‚è€ƒèµ„æ–™</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/mysql.jpeg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">å°é»‘çš„å°ç«™</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat" aria-hidden="true"></i><span> æ¸…å•</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fa fa-picture-o"></i><span> ç…§ç‰‡</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> ç”µå½±</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">å‰ç«¯/ä½ çœŸçš„ä¼šç”¨ a æ ‡ç­¾ä¸‹è½½å—</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2024-01-31 10:40:42"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2024-01-31</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2024-01-31 11:24:53"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2024-01-31</span></time></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">3.4k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 12 åˆ†é’Ÿ</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h1 id="åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½"><a href="#åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½" class="headerlink" title="åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½"></a>åç«¯æ¥å£åŠ¨æ€ç”Ÿæˆcsvæ ¼å¼çš„æ•°æ®ï¼Œè¿”å›å‰ç«¯äºŒè¿›åˆ¶æ•°æ®ï¼Œå”¤é†’æµè§ˆå™¨è¿›è¡Œä¸‹è½½</h1><p>è®°å½•ä¸€ä¸‹æœ€è¿‘å†™çš„ä¸‹è½½æ–¹æ³•,åœ¨éåŒæºè¯·æƒ…å†µä¸‹å¯ä»¥å°†èµ„æºå½“æˆäºŒè¿›åˆ¶çš„ blob å…ˆæ‹¿åˆ°æ‰‹ï¼Œå†è¿›è¡Œ<code>&lt;a&gt;</code> çš„ä¸‹è½½å¤„ç†ã€‚</p>
<p>å¦‚æœåç«¯ä¸šåŠ¡ä¸Šæœ‰é—®é¢˜ä¼šæå‰æŠ›é”™ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ç»ˆæ­¢ä¸‹è½½ï¼Œç»™äºˆé”™è¯¯æç¤ºã€‚<br>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> downloadExcelTemplate = <span class="keyword">async</span> (_url: <span class="built_in">string</span>, _fileName?: <span class="built_in">string</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    ElMessage(&#123;</span><br><span class="line">      <span class="keyword">type</span>: <span class="string">"info"</span>,</span><br><span class="line">      message: <span class="string">"å³å°†å¼€å§‹ä¸‹è½½"</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">const</span> res: <span class="built_in">any</span> = <span class="keyword">await</span> request.get(&#123;</span><br><span class="line">      url: _url,</span><br><span class="line">      responseType: <span class="string">"blob"</span>,</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">"Content-Type"</span>: <span class="string">"application/x-www-form-urlencoded"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (res &amp;&amp; res.data) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.data.type == <span class="string">"application/json"</span>) &#123;</span><br><span class="line">        <span class="keyword">await</span> fileExportResponseError(res);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      ElMessage(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">"success"</span>,</span><br><span class="line">        message: res.msg || <span class="string">"å³å°†å¼€å§‹ä¸‹è½½"</span></span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">const</span> url = <span class="built_in">window</span>.URL.createObjectURL(<span class="keyword">new</span> Blob([res.data]));</span><br><span class="line">      <span class="comment">// åˆ›å»ºä¸€ä¸ªaæ ‡ç­¾</span></span><br><span class="line">      <span class="keyword">const</span> link = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">      link.href = url;</span><br><span class="line">      <span class="keyword">let</span> fileName = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">if</span> (_fileName) &#123;</span><br><span class="line">        fileName = _fileName;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ä»Content-Dispositionä¸­æå–æ–‡ä»¶å</span></span><br><span class="line">        <span class="keyword">const</span> contentDisposition = res.headers[<span class="string">"content-disposition"</span>];</span><br><span class="line">        <span class="keyword">const</span> fileNameMatch = contentDisposition?.match(<span class="regexp">/filename\*=utf-8''([^;]+)/</span>);</span><br><span class="line">        <span class="keyword">const</span> name = fileNameMatch ? fileNameMatch[<span class="number">1</span>] : <span class="string">"æ¨¡æ¿"</span>;</span><br><span class="line">        fileName = <span class="built_in">decodeURIComponent</span>(name);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      link.setAttribute(<span class="string">"download"</span>, fileName);</span><br><span class="line">      <span class="comment">// æ¨¡æ‹Ÿç‚¹å‡»ä¸‹è½½</span></span><br><span class="line">      link.click();</span><br><span class="line">      <span class="comment">// é‡Šæ”¾URLå¯¹è±¡</span></span><br><span class="line">      <span class="built_in">window</span>.URL.revokeObjectURL(url);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      ElMessage(&#123;</span><br><span class="line">        <span class="keyword">type</span>: <span class="string">"warning"</span>,</span><br><span class="line">        message: res.msg || <span class="string">"ä¸‹è½½å¤±è´¥"</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"error :&gt;&gt; "</span>, error);</span><br><span class="line">    ElMessage(&#123;</span><br><span class="line">      <span class="keyword">type</span>: <span class="string">"warning"</span>,</span><br><span class="line">      message: <span class="string">"ä¸‹è½½å¤±è´¥"</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„-txt-æ ¼å¼æ–‡ä»¶"><a href="#æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„-txt-æ ¼å¼æ–‡ä»¶" class="headerlink" title="æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„ txt æ ¼å¼æ–‡ä»¶"></a>æˆ‘çœŸæ­£é‡åˆ°çš„é—®é¢˜ï¼Œåœ¨è·¨åŸŸçš„æƒ…å†µä¸‹ï¼Œæ— æ³•æ­£å¸¸è¿›è¡Œä¸‹è½½ï¼Œä¸€ç›´ä¼šä¸‹è½½ä¸€ä¸ªé”™è¯¯çš„ txt æ ¼å¼æ–‡ä»¶</h2><p>åç«¯è¦è®¾ç½®æš´éœ² content-disposition ï¼Œå¦åˆ™æµè§ˆå™¨æ— æ³•æ­£å¸¸ä¸‹è½½ xls æ ¼å¼çš„æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setHeader(<span class="string">"Access-Control-Expose-Headers"</span>, <span class="string">"Content-Disposition"</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨æ’æŸ¥é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œåˆšå¥½ä¹Ÿè¿›è¡Œäº†è¿™å—çŸ¥è¯†çš„å¤ä¹ å’Œæ·±å…¥ã€‚</p>
<p>ä»¥ä¸‹æ–‡ç« è½¬è½½è‡ªæ˜é‡‘ <a href="https://juejin.cn/post/7246747232997720120" target="_blank" rel="noopener">https://juejin.cn/post/7246747232997720120</a></p>
<h2 id="a-æ ‡ç­¾-download"><a href="#a-æ ‡ç­¾-download" class="headerlink" title="a æ ‡ç­¾ download"></a>a æ ‡ç­¾ download</h2><p>è¿™åº”è¯¥æ˜¯æœ€å¸¸è§ï¼Œæœ€å—å¹¿å¤§äººæ°‘ç¾¤ä¼—å–œé—»ä¹è§çš„ä¸€ç§ä¸‹è½½æ–¹å¼äº†ï¼Œæ­é…ä¸Š <code>download</code> å±æ€§ï¼Œ å°±èƒ½è®©æµè§ˆå™¨å°†é“¾æ¥çš„ URL è§†ä¸ºä¸‹è½½èµ„æºï¼Œè€Œä¸æ˜¯å¯¼èˆªåˆ°è¯¥èµ„æºã€‚</p>
<p>å¦‚æœ <code>download</code> å†æŒ‡å®šä¸ª <code>filename</code> ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ä¸‹è½½æ–‡ä»¶æ—¶ï¼Œå°†å…¶ä½œä¸ºé¢„å¡«å……çš„æ–‡ä»¶åã€‚ä¸è¿‡åå­—ä¸­çš„ <code>/</code> å’Œ <code>\</code> ä¼šè¢«è½¬åŒ–ä¸ºä¸‹åˆ’çº¿ <code>_</code>ï¼Œè€Œä¸”æ–‡ä»¶ç³»ç»Ÿå¯èƒ½ä¼šé˜»æ­¢æ–‡ä»¶åä¸­çš„ä¸€äº›å­—ç¬¦ï¼Œå› æ­¤æµè§ˆå™¨ä¼šåœ¨å¿…è¦æ—¶é€‚å½“è°ƒæ•´æ–‡ä»¶åã€‚</p>
<h3 id="å°è£…ä¸‹è½½æ–¹æ³•"><a href="#å°è£…ä¸‹è½½æ–¹æ³•" class="headerlink" title="å°è£…ä¸‹è½½æ–¹æ³•"></a>å°è£…ä¸‹è½½æ–¹æ³•</h3><p>è´´ä»½å„¿æˆ‘å¸¸ç”¨çš„ä¸‹è½½æ–¹æ³•ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> downloadByUrl = <span class="function">(<span class="params">url: <span class="built_in">string</span>, filename: <span class="built_in">string</span></span>) =&gt;</span> &#123; <span class="keyword">if</span> (!url) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'å½“å‰æ²¡æœ‰ä¸‹è½½é“¾æ¥'</span>); <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>); a.style.display = <span class="string">"none"</span>; a.href = url; a.download = filename; <span class="comment">// ä½¿ç”¨target="_blank"æ—¶ï¼Œæ·»åŠ rel="noopener noreferrer" å µä½é’“é±¼å®‰å…¨æ¼æ´ é˜²æ­¢æ–°é¡µé¢windowæŒ‡å‘ä¹‹å‰çš„é¡µé¢ a.rel = "noopener noreferrer"; document.body.append(a); a.click(); setTimeout(() =&gt; &#123; a.remove(); &#125;, 1000); &#125;;</span></span><br></pre></td></tr></table></figure>

<h4 id="Firefox-ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½"><a href="#Firefox-ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½" class="headerlink" title="Firefox ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½"></a>Firefox ä¸èƒ½ä¸€æ¬¡ç‚¹å‡»å¤šæ¬¡ä¸‹è½½</h4><p>è¿™é‡Œæœ‰ä¸ªå…¼å®¹æ€§é—®é¢˜ï¼šåœ¨ç«ç‹æµè§ˆå™¨ä¸­ï¼Œå½“ä¸€ä¸ªæŒ‰é’®åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼ˆè°ƒç”¨å¤šæ¬¡ï¼‰æ—¶ï¼Œåªèƒ½ä¸‹è½½ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>&lt;a&gt;</code> æ ‡ç­¾çš„ <code>target</code> å±æ€§ï¼Œå°†å…¶è®¾ç½®æˆ <code>_blank</code> è®©ç«ç‹åœ¨ä¸€ä¸ªæ–°æ ‡ç­¾é¡µä¸­ç»§ç»­ä¸‹è½½ã€‚</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥æµè§ˆå™¨å‹å·å’Œç‰ˆæœ¬ const useBrowser = () =&gt; &#123; const ua = navigator.userAgent.toLowerCase(); const re = /(msie|firefox|chrome|opera|version).*?([\d.]+)/; const m = ua.match(re); const Sys = &#123; browser: m[1].replace(/version/, "'safari"), version: m[2] &#125;; return Sys; &#125;;</span></span><br></pre></td></tr></table></figure>

<p>æ·»åŠ ä¸€ä¸ªæµè§ˆå™¨åˆ¤æ–­ï¼š</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> downloadByUrl = <span class="function">(<span class="params">url: <span class="built_in">string</span>, filename: <span class="built_in">string</span></span>) =&gt;</span> &#123; <span class="comment">// ç•¥...... // ç«ç‹å…¼å®¹ if (useBrowser().browser === "firefox") &#123; a.target = "_blank"; &#125; document.body.append(a); &#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="download-ä½¿ç”¨æ³¨æ„ç‚¹"><a href="#download-ä½¿ç”¨æ³¨æ„ç‚¹" class="headerlink" title="download ä½¿ç”¨æ³¨æ„ç‚¹"></a>download ä½¿ç”¨æ³¨æ„ç‚¹</h3><p><code>&lt;a&gt;</code> æ ‡ç­¾è™½å¥½ï¼Œä½†è¿˜æœ‰ä¸€äº›å€¼å¾—æ³¨æ„çš„ç‚¹ï¼š</p>
<h4 id="1-åŒæº-URL-çš„é™åˆ¶"><a href="#1-åŒæº-URL-çš„é™åˆ¶" class="headerlink" title="1. åŒæº URL çš„é™åˆ¶"></a>1. åŒæº URL çš„é™åˆ¶</h4><blockquote>
<p>download åªåœ¨åŒæº URL æˆ– <code>blob:</code> ã€ <code>data:</code> åè®®èµ·ä½œç”¨</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´è·¨åŸŸæ˜¯ä¸‹è½½ä¸äº†çš„â€¦â€¦ï¼ˆè¿™ç§è¯´æ³•ä¸å…¨å¯¹ï¼Œé™¤éåç«¯é…ç½® Content-Disposition ä¸º attachmentï¼Œåé¢ä¼šè®²ï¼‰</p>
<p>é¦–å…ˆï¼ŒéåŒæº URL ä¼šè¿›è¡Œå¯¼èˆªæ“ä½œã€‚å…¶æ¬¡ï¼Œå¦‚æœéè¦ä¸‹è½½ï¼Œé‚£ä¹ˆæ­£å¦‚ä¸Šé¢çš„æ–‡æ¡£æ‰€è¯´ï¼Œå¯ä»¥å…ˆå°†å…¶è½¬æ¢ä¸º <code>blob:</code> æˆ– <code>data:</code> å†è¿›è¡Œä¸‹è½½ï¼Œè‡³äºå¦‚ä½•è½¬æ¢ä¼šåœ¨ <code>Blob</code> ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»ã€‚</p>
<h4 id="2-ä¸èƒ½æºå¸¦-Header"><a href="#2-ä¸èƒ½æºå¸¦-Header" class="headerlink" title="2. ä¸èƒ½æºå¸¦ Header"></a>2. ä¸èƒ½æºå¸¦ Header</h4><p>ä½¿ç”¨ <code>&lt;a&gt;</code> æ ‡ç­¾ä¸‹è½½æ˜¯å¸¦ä¸äº† <code>Header</code> çš„ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡æ·»åŠ è¯·æ±‚è¡¨å¤´çš„å½¢å¼æ¥é‰´æƒï¼Œä½†æ˜¯å¯ä»¥å°† <code>sessionid</code> æˆ– <code>token</code> å­—æ®µæ‹¼æ¥åˆ° URL æœ«å°¾æ¥è¾¾åˆ°é‰´æƒçš„ç›®çš„ã€‚è¿™é‡Œæˆ‘ä»¬ç»™å‡ºå¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>å…ˆå‘é€è¯·æ±‚è·å– <code>blob</code> æ–‡ä»¶æµï¼Œè¿™æ ·å°±èƒ½åœ¨è¯·æ±‚æ—¶è¿›è¡Œé‰´æƒï¼›</li>
<li>é‰´æƒé€šè¿‡åå†æ‰§è¡Œä¸‹è½½æ“ä½œã€‚</li>
</ol>
<p>è¿™æ ·æ˜¯ä¸æ˜¯å°±èƒ½å¾ˆå¥½çš„åŒæ—¶è§£å†³é—®é¢˜ 1 å’Œé—®é¢˜ 2 å¸¦æ¥çš„ä¸¤ä¸ªç—›ç‚¹äº†å‘¢ï¼Œè€Œä¸”ä¸‹è½½çš„æ–‡ä»¶åä¹Ÿèƒ½è‡ªå®šä¹‰äº† ğŸ˜ƒ</p>
<p>é¡ºä¾¿æä¸€ä¸‹ï¼Œ<code>location.href</code> å’Œ <code>window.open</code> ä¹Ÿå­˜åœ¨<a href="https://juejin.cn/post/7156427561302982670#heading-1" target="_blank" rel="noopener" title="https://juejin.cn/post/7156427561302982670#heading-1">åŒæ ·çš„é—®é¢˜</a>ã€‚</p>
<h4 id="3-download-ä¸-Content-Disposition-çš„ä¼˜å…ˆçº§"><a href="#3-download-ä¸-Content-Disposition-çš„ä¼˜å…ˆçº§" class="headerlink" title="3. download ä¸ Content-Disposition çš„ä¼˜å…ˆçº§"></a>3. download ä¸ Content-Disposition çš„ä¼˜å…ˆçº§</h4><p>è¿™é‡Œéœ€è¦å…³æ³¨ä¸€ä¸ªå“åº”æ ‡å¤´ <code>Content-Disposition</code>ã€‚åœ¨åŒæºæƒ…å†µä¸‹ï¼ˆéåŒæº download ç›´æ¥æ— æ•ˆï¼Œæ²¡æœ‰å¯æ¯”æ€§ï¼‰ï¼Œå®ƒä¼šå½±å“ <code>&lt;a&gt;</code>çš„ <code>download</code> ä»è€Œå¯èƒ½äº§ç”Ÿä¸åŒçš„ä¸‹è½½è¡Œä¸ºï¼Œå…ˆçœ‹ä¸€ä¸ªçœŸå®ä¸‹è½½é“¾æ¥çš„ <code>Response Headers</code>ï¼š</p>
<p><img src="/" class="lazyload" data-src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c1a3ed67530b48aaa2a00af74e6bf0dc~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=677&h=146&s=12046&e=png&b=ffffff"  alt="Snipaste_2023-06-20_18-19-21.png"></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œ<code>Content-Disposition</code> çš„ value å€¼ä¸º <code>attachment;filename=aaaa.bb</code>ã€‚è¯·è®°ä½ï¼Œæ­¤æ—¶ <strong>Content-Disposition çš„ filename ä¼˜å…ˆçº§ä¼šå¤§äº <code>&lt;a&gt;</code> download çš„ä¼˜å…ˆçº§</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸¤è€…éƒ½æŒ‡å®šäº† <code>filename</code> æ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ <code>Content-Disposition</code> ä¸­çš„æ–‡ä»¶åã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªå“åº”æ ‡å¤´åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<h2 id="Content-Disposition"><a href="#Content-Disposition" class="headerlink" title="Content-Disposition"></a>Content-Disposition</h2><blockquote>
<p>åœ¨å¸¸è§„çš„ HTTP åº”ç­”ä¸­ï¼ŒContent-Disposition å“åº”æ ‡å¤´æŒ‡ç¤ºå›å¤çš„å†…å®¹è¯¥ä»¥ä½•ç§å½¢å¼å±•ç¤ºï¼Œæ˜¯ä»¥å†…è”çš„å½¢å¼ï¼ˆå³ç½‘é¡µæˆ–è€…é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¿˜æ˜¯ä»¥é™„ä»¶çš„å½¢å¼ä¸‹è½½å¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</p>
</blockquote>
<p>ä¸ <code>Content-Type</code> ä¸åŒï¼Œåè€…ç”¨æ¥æŒ‡ç¤ºèµ„æºçš„ MIME ç±»å‹ï¼Œæ¯”å¦‚èµ„æºæ˜¯å›¾ç‰‡ï¼ˆ<code>image/png</code>ï¼‰è¿˜æ˜¯ä¸€æ®µ JSONï¼ˆ<code>application/json</code>ï¼‰ï¼Œè€Œ <code>Content-Disposition</code> åˆ™æ˜¯ç”¨æ¥æŒ‡æ˜è¯¥èµ„æºæ˜¯ç›´æ¥å±•ç¤ºåœ¨é¡µé¢ä¸Šçš„ï¼Œè¿˜æ˜¯åº”è¯¥å½“æˆé™„ä»¶ä¸‹è½½ä¿å­˜åˆ°æœ¬åœ°çš„ã€‚</p>
<p>å½“å®ƒä½œä¸º HTTP æ¶ˆæ¯ä¸»é¢˜çš„æ ‡å¤´æ—¶ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§å†™æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: inline Content-Disposition: attachment Content-Disposition: attachment; filename&#x3D;&quot;filename.jpg&quot;</span><br></pre></td></tr></table></figure>

<h3 id="inline"><a href="#inline" class="headerlink" title="inline"></a>inline</h3><p>é»˜è®¤å€¼ï¼Œå³æŒ‡æ˜èµ„æºæ˜¯ç›´æ¥å±•ç¤ºåœ¨é¡µé¢ä¸Šçš„ã€‚ ä½†æ˜¯åœ¨åŒæº URL æƒ…å†µä¸‹ï¼Œ<code>&lt;a&gt;</code> å…ƒç´ çš„ <code>download</code> å±æ€§ä¼˜å…ˆçº§æ¯” <code>inline</code> å¤§ï¼Œæµè§ˆå™¨ä¼˜å…ˆä½¿ç”¨ <code>download</code> å±æ€§æ¥å¤„ç†ä¸‹è½½ï¼ˆFirefox æ—©æœŸç‰ˆæœ¬é™¤å¤–ï¼‰ã€‚</p>
<h3 id="attachment"><a href="#attachment" class="headerlink" title="attachment"></a>attachment</h3><p>å³æŒ‡æ˜èµ„æºåº”è¯¥è¢«ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¤§å¤šæ•°æµè§ˆå™¨ä¼šå‘ˆç°ä¸€ä¸ª â€œä¿å­˜ä¸ºâ€ çš„å¯¹è¯æ¡†ï¼Œå¦‚æœæ­¤æ—¶åé¢è¿˜æœ‰ <code>filename</code>ï¼Œé‚£ä¹ˆå®ƒå°†å…¶ä¼˜äº <code>download</code> å±æ€§æˆä¸ºä¸‹è½½çš„é¢„å¡«å……æ–‡ä»¶åã€‚</p>
<p><strong>å®ƒçš„ä¼˜å…ˆçº§æœ€é«˜</strong>ã€‚</p>
<p>æ­¤æ—¶ï¼Œæ— è®ºæ˜¯  <strong>a æ ‡ç­¾è·³è½¬</strong>ã€<strong>location.href å¯¼èˆª</strong>ã€<strong>window.open æ‰“å¼€æ–°é¡µé¢</strong>ã€<strong>ç›´æ¥åœ¨åœ°å€æ ä¸Šè¾“å…¥ URL</strong>  ç­‰ï¼Œå…¶ç»“æœï¼š</p>
<p>éƒ½å¯ä»¥å®ç°ä¸‹è½½ï¼</p>
<p>éƒ½å¯ä»¥å®ç°ä¸‹è½½ï¼</p>
<p>éƒ½å¯ä»¥å®ç°ä¸‹è½½ï¼</p>
<h3 id="lt-a-gt-æ ‡ç­¾-VS-Content-Disposition"><a href="#lt-a-gt-æ ‡ç­¾-VS-Content-Disposition" class="headerlink" title="&lt;a&gt;æ ‡ç­¾ VS Content-Disposition"></a><code>&lt;a&gt;</code>æ ‡ç­¾ VS Content-Disposition</h3><p>ä»‹ç»å®Œ <code>Content-Disposition</code>ï¼Œæˆ‘ä»¬åšä¸€ä¸ªæ¨ªå‘æ¯”å¯¹çš„å½’çº³ä¸€ä¸‹ï¼š</p>
<ul>
<li><p><code>download</code> VS <code>inline/attachment</code></p>
<p>ä¼˜å…ˆçº§ï¼š<code>attachment</code> &gt; <code>download</code> &gt; <code>inline</code></p>
</li>
<li><p><code>download</code> çš„å€¼ VS <code>attachment</code> çš„å€¼ï¼ˆæŒ‡ filenameï¼‰</p>
<p>ä¼˜å…ˆçº§ï¼š<code>attachment</code> çš„å€¼ &gt; <code>download</code> çš„å€¼</p>
</li>
</ul>
<h2 id="Blob-è½¬æ¢"><a href="#Blob-è½¬æ¢" class="headerlink" title="Blob è½¬æ¢"></a>Blob è½¬æ¢</h2><p>å‰æ–‡ä»‹ç»åˆ°ï¼Œåœ¨éåŒæºè¯·æƒ…å†µä¸‹å¯ä»¥å°†èµ„æºå½“æˆäºŒè¿›åˆ¶çš„ blob å…ˆæ‹¿åˆ°æ‰‹ï¼Œå†è¿›è¡Œ <code>&lt;a&gt;</code> çš„ä¸‹è½½å¤„ç†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸¤ç§ blob çš„æ“ä½œï¼š</p>
<h3 id="æ–¹æ³•-1-ç”¨ä½œ-URLï¼ˆblob-ï¼‰"><a href="#æ–¹æ³•-1-ç”¨ä½œ-URLï¼ˆblob-ï¼‰" class="headerlink" title="æ–¹æ³• 1. ç”¨ä½œ URLï¼ˆblob:ï¼‰"></a>æ–¹æ³• 1. ç”¨ä½œ URLï¼ˆblob:ï¼‰</h3><p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FURL%2FcreateObjectURL_static" title="https://developer.mozilla.org/zh-CN/docs/Web/API/URL/createObjectURL_static">URL.createObjectURL</a> å¯ä»¥ç»™ <code>File</code> æˆ– <code>Blob</code> ç”Ÿæˆä¸€ä¸ª URLï¼Œå½¢å¼ä¸º <code>blob:&lt;origin&gt;/&lt;uuid&gt;</code>ï¼Œæ­¤æ—¶æµè§ˆå™¨å†…éƒ¨å°±ä¼šä¸ºæ¯ä¸ªè¿™æ ·çš„ URL å­˜å‚¨ä¸€ä¸ª URL â†’ Blob çš„æ˜ å°„ã€‚å› æ­¤ï¼Œæ­¤ç±» URL å¾ˆçŸ­ï¼Œä½†å¯ä»¥è®¿é—® Blobã€‚</p>
<p>é‚£è¿™å°±å¥½åŠå¤šäº†ï¼Œå†™æˆä»£ç å°±ä¸‰è¡Œï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> downloadByUrl <span class="keyword">from</span> <span class="string">"@/utils/download"</span>; <span class="keyword">const</span> download = <span class="keyword">async</span> () =&gt; &#123; <span class="keyword">const</span> blob = <span class="keyword">await</span> fetchFile(); <span class="comment">// ç”Ÿæˆè®¿é—® blob çš„ URL const url = URL.createObjectURL(blob); // è°ƒç”¨åˆšåˆšå°è£…çš„ a æ ‡ç­¾ä¸‹è½½æ–¹æ³• downloadByUrl(url, "è¡¨æ ¼æ–‡ä»¶.xlsx"); // åˆ é™¤æ˜ å°„ï¼Œé‡Šæ”¾å†…å­˜ URL.revokeObjectURL(url); &#125;;</span></span><br></pre></td></tr></table></figure>

<p>ä¸è¿‡å®ƒæœ‰ä¸ªå‰¯ä½œç”¨ã€‚è™½ç„¶è¿™é‡Œæœ‰  <code>Blob</code>  çš„æ˜ å°„ï¼Œä½†  <code>Blob</code>  æœ¬èº«åªä¿å­˜åœ¨å†…å­˜ä¸­çš„ã€‚æµè§ˆå™¨æ— æ³•é‡Šæ”¾å®ƒã€‚</p>
<p>åœ¨æ–‡æ¡£é€€å‡ºæ—¶ï¼ˆunloadï¼‰ï¼Œè¯¥æ˜ å°„ä¼šè¢«è‡ªåŠ¨æ¸…é™¤ï¼Œå› æ­¤  <code>Blob</code>  ä¹Ÿç›¸åº”è¢«é‡Šæ”¾äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœåº”ç”¨ç¨‹åºå¯¿å‘½å¾ˆé•¿ï¼Œé‚£è¿™ä¸ªé‡Šæ”¾å°±ä¸ä¼šå¾ˆå¿«å‘ç”Ÿã€‚</p>
<p><strong>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª URLï¼Œé‚£ä¹ˆå³ä½¿æˆ‘ä»¬ä¸å†éœ€è¦è¯¥  <code>Blob</code>  äº†ï¼Œå®ƒä¹Ÿä¼šè¢«æŒ‚åœ¨å†…å­˜ä¸­ã€‚</strong></p>
<p>ä¸è¿‡ï¼Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FURL%2FrevokeObjectURL_static" title="https://developer.mozilla.org/zh-CN/docs/Web/API/URL/revokeObjectURL_static">URL.revokeObjectURL</a> å¯ä»¥ä»å†…éƒ¨æ˜ å°„ä¸­ç§»é™¤å¼•ç”¨ï¼Œå…è®¸  <code>Blob</code>  è¢«åˆ é™¤å¹¶é‡Šæ”¾å†…å­˜ã€‚æ‰€ä»¥ï¼Œåœ¨å³æ—¶ä¸‹è½½å®Œèµ„æºåï¼Œä¸è¦å¿˜è®°ç«‹å³è°ƒç”¨ URL.revokeObjectURLã€‚</p>
<h3 id="æ–¹æ³•-2-è½¬æ¢ä¸º-base64ï¼ˆdata-ï¼‰"><a href="#æ–¹æ³•-2-è½¬æ¢ä¸º-base64ï¼ˆdata-ï¼‰" class="headerlink" title="æ–¹æ³• 2. è½¬æ¢ä¸º base64ï¼ˆdata:ï¼‰"></a>æ–¹æ³• 2. è½¬æ¢ä¸º base64ï¼ˆdata:ï¼‰</h3><p>ä½œä¸º <code>URL.createObjectURL</code>  çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†  Blob  è½¬æ¢ä¸º base64-ç¼–ç çš„å­—ç¬¦ä¸²ã€‚è¿™ç§ç¼–ç å°†äºŒè¿›åˆ¶æ•°æ®è¡¨ç¤ºä¸ºä¸€ä¸ªç”± 0 åˆ° 64 çš„ ASCII ç ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œéå¸¸å®‰å…¨ä¸”â€œå¯è¯»â€ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ â€”â€” æˆ‘ä»¬å¯ä»¥åœ¨ â€œdata-urlâ€ ä¸­ä½¿ç”¨æ­¤ç¼–ç ã€‚<a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh%2Fdocs%2FWeb%2Fhttp%2FData_URIs" title="https://developer.mozilla.org/zh/docs/Web/http/Data_URIs">â€œdata-urlâ€</a>  çš„å½¢å¼ä¸º  <code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code>ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™ç§ urlï¼Œå’Œä½¿ç”¨â€œå¸¸è§„â€ url ä¸€æ ·ã€‚</p>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FFileReader" title="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader">FileReader</a> æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶<strong>å”¯ä¸€ç›®çš„</strong>å°±æ˜¯ä» Blob å¯¹è±¡ä¸­è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒçš„ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FFileReader%2FreadAsDataURL" title="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader/readAsDataURL">readAsDataURL</a> æ–¹æ³•å°† Blob è¯»å–ä¸º base64ã€‚è¯·çœ‹ä»¥ä¸‹ç¤ºä¾‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> downloadByUrl <span class="keyword">from</span> <span class="string">"@/utils/download"</span>; <span class="keyword">const</span> download = <span class="keyword">async</span> () =&gt; &#123; <span class="keyword">const</span> blob = <span class="keyword">await</span> fetchFile(); <span class="comment">// å£°æ˜ä¸€ä¸ª fileReader const fileReader = new FileReader(); // å°† blob è¯»å–æˆ base64 fileReader.readAsDataURL(blob); // è¯»å–æˆåŠŸå ä¸‹è½½èµ„æº fileReader.onload = function () &#123; downloadByUrl(fileReader.result); &#125;; &#125;;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å…ˆå®ä¾‹åŒ–äº†ä¸€ä¸ª <code>fileReader</code>ï¼Œç”¨å®ƒæ¥è¯»å– blobã€‚</p>
<p>ä¸€æ—¦è¯»å–å®Œæˆï¼Œå°±å¯ä»¥ä» fileReader çš„ <code>result</code> å±æ€§ä¸­æ‹¿åˆ°ä¸€ä¸ª<code>data: URL</code> æ ¼å¼çš„ Base64 å­—ç¬¦ä¸²ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬ç»™ fileReader æ³¨å†Œäº†ä¸€ä¸ª <code>onload</code> äº‹ä»¶ï¼Œåœ¨è¯»å–æ“ä½œå®Œæˆåå¼€å§‹ä¸‹è½½ã€‚</p>
<h3 id="ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”"><a href="#ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”" class="headerlink" title="ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”"></a>ä¸¤ç§æ–¹æ³•æ€»ç»“ä¸å¯¹æ¯”</h3><p><code>URL.createObjectURL(blob)</code> å¯ä»¥ç›´æ¥è®¿é—®ï¼Œæ— éœ€â€œç¼–ç /è§£ç â€ï¼Œä½†éœ€è¦è®°å¾—æ’¤é”€ï¼ˆrevokeï¼‰ï¼›</p>
<p>è€Œ <code>Data URL</code> æ— éœ€æ’¤é”€ï¼ˆrevokeï¼‰ä»»ä½•æ“ä½œï¼Œä½†å¯¹å¤§çš„  <code>Blob</code>  è¿›è¡Œç¼–ç æ—¶ï¼Œæ€§èƒ½å’Œå†…å­˜ä¼šæœ‰æŸè€—ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œè¿™ä¸¤ç§ä»  <code>Blob</code>  åˆ›å»º URL çš„æ–¹æ³•éƒ½å¯ä»¥ç”¨ã€‚ä½†é€šå¸¸  <code>URL.createObjectURL(blob)</code>  æ›´ç®€å•å¿«æ·ã€‚</p>
<h3 id="responseType"><a href="#responseType" class="headerlink" title="responseType"></a>responseType</h3><p>æœ€åï¼Œæˆ‘ä»¬å›å¤´è¯´ä¸€ä¸‹è¯·æ±‚çš„æ³¨æ„ç‚¹ï¼šå¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨çš„æ˜¯ <code>XHR</code> ï¼ˆæ¯”å¦‚ axiosï¼‰è€Œä¸æ˜¯ <code>fetch</code>ï¼Œ é‚£ä¹ˆè¯·è®°å¾—åœ¨è¯·æ±‚æ—¶æ·»åŠ ä¸Š <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FXMLHttpRequest%2FresponseType" title="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">responseType</a> ä¸º â€˜blobâ€™ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fetchFile = <span class="keyword">async</span> params =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> axios.get(api, &#123; params, <span class="attr">responseType</span>: <span class="string">"blob"</span> &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><code>responseType</code> ä¸æ˜¯ axios ä¸­çš„å±æ€§ï¼Œè€Œæ˜¯ <code>XMLHttpRequest</code> ä¸­çš„å±æ€§ï¼Œå®ƒç”¨äºæŒ‡å®šå“åº”ä¸­åŒ…å«çš„æ•°æ®ç±»å‹ï¼Œå½“ä¸º â€œblobâ€ æ—¶ï¼Œè¡¨æ˜ <code>Response</code> æ˜¯ä¸€ä¸ªåŒ…å«äºŒè¿›åˆ¶æ•°æ®çš„  <code>Blob</code> å¯¹è±¡ã€‚</p>
<p>é™¤äº† <code>blob</code> ä¹‹å¤–ï¼ŒresponseType è¿˜æœ‰ <code>arraybuffer</code>ã€<code>json</code>ã€<code>text</code>ç­‰å…¶ä»–æšä¸¾å­—ç¬¦ä¸²å€¼ã€‚</p>
<h2 id="Content-Type-ä¸-MIME-å—…æ¢"><a href="#Content-Type-ä¸-MIME-å—…æ¢" class="headerlink" title="Content-Type ä¸ MIME å—…æ¢"></a>Content-Type ä¸ MIME å—…æ¢</h2><p>çœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šè§‰å¾—å¾ˆéº»çƒ¦ï¼šä»€ä¹ˆä¹±ä¸ƒå…«æ§½çš„ï¼Œæˆ‘åšéœ€æ±‚çš„æ—¶å€™ä¸éœ€è¦æè¿™äº›èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿å•Šï¼Œç›´æ¥ä¸€ä¸ª <code>window.open()</code> æˆ–è€… <code>location.href</code> å°±å¯ä»¥ç›´æ¥ä¸‹è½½äº†ï¼Œä¹Ÿæ²¡æœ‰çœ‹åˆ°é“¾æ¥ä¸Šæœ‰å†™ä»€ä¹ˆ <code>Content-Dispoistion</code> å‘€ï¼</p>
<p><img src="/" class="lazyload" data-src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1eb142c6daf543edaee4f0e480e743e8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=248&h=185&s=10767&e=gif&f=2&b=f8f6f6"  alt="132U330G-0.gif"></p>
<p>æ­å–œä½ ï¼Œé‡åˆ°äº†ä¸€ä¸ªå¥½åç«¯~</p>
<p>çš„ç¡®ï¼Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œå³ä½¿ä¸æŒ‡å®š <code>Content-Dispoistion</code> ä¾ç„¶èƒ½å¤Ÿä»¥æœ€ç®€å•çš„æ–¹å¼ç›´æ¥ä¸‹è½½ã€‚æ¯”å¦‚ï¼Œè¿™ä¸ªä¸‹è½½é“¾æ¥ï¼š</p>
<p><img src="/" class="lazyload" data-src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24cf5ba9a2054736b61fd935adc2e2a9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=915&h=469&s=40798&e=png&b=ffffff"  alt="excel.png"></p>
<p>å½“ä½¿ç”¨ <code>window.open()</code> æˆ– <code>location.href</code> å‘èµ·ä¸€ä¸ª <code>Doc</code> ç±»å‹çš„è¯·æ±‚æ—¶ï¼ˆ<strong>æ³¨æ„ï¼Œä¸æ˜¯ <code>Fetch/XHR</code> ç±»å‹</strong>ï¼‰ï¼Œæµè§ˆå™¨ä¾¿ä¼šè‡ªåŠ¨ä¸‹è½½ <code>.xlsx</code> æ ¼å¼çš„ <code>excel</code> æ–‡ä»¶ã€‚</p>
<p>è¿™æ˜¯å› ä¸º <code>Content-Type</code> è¢«è®¾ç½®æˆäº† <code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</code>ï¼Œè¡¨ç¤ºè¿”å›çš„å†…å®¹æ˜¯æ‰©å±•åä¸º <code>.xlsx</code> ä¸”æ–‡æ¡£ç±»å‹ä¸º <code>Microsoft Excel (OpenXML)</code> çš„èµ„æºã€‚</p>
<p>é™¤äº† Excel è¿˜æœ‰ Wordã€PPTï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±ç‰¹å®šçš„ MIME ç±»å‹ï¼š</p>
<table>
<thead>
<tr>
<th>æ‰©å±•å</th>
<th>æ–‡æ¡£ç±»å‹</th>
<th>MIME ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>.doc</code></td>
<td>Microsoft Word</td>
<td>application/msword</td>
</tr>
<tr>
<td><code>.docx</code></td>
<td>Microsoft Word (OpenXML)</td>
<td>application/vnd.openxmlformats-officedocument.wordprocessingml.document</td>
</tr>
<tr>
<td><code>.xls</code></td>
<td>Microsoft Excel</td>
<td>application/vnd.ms-excel</td>
</tr>
<tr>
<td><code>.xlsx</code></td>
<td>Microsoft Excel (OpenXML)</td>
<td>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</td>
</tr>
<tr>
<td><code>.ppt</code></td>
<td>Microsoft PowerPoint</td>
<td>application/vnd.ms-powerpoint</td>
</tr>
<tr>
<td><code>.pptx</code></td>
<td>Microsoft PowerPoint (OpenXML)</td>
<td>application/vnd.openxmlformats-officedocument.presentationml.presentation</td>
</tr>
</tbody></table>
<p>æ­£æ˜¯è¿™äº›ç±»å‹ï¼Œæ‰è§¦å‘äº†æµè§ˆå™¨çš„ä¸‹è½½è¡Œä¸ºã€‚å½“ç„¶ï¼Œä¸åŒçš„æµè§ˆå™¨è¡Œä¸ºå¯èƒ½ä¸ä¸€æ ·ã€‚</p>
<p>é‚£å¦‚æœè¿ <code>Content-Type</code> éƒ½æ²¡æœ‰è®¾ç½®å‘¢ï¼Ÿ</p>
<blockquote>
<p>åœ¨ç¼ºå¤± MIME ç±»å‹æˆ–å®¢æˆ·ç«¯è®¤ä¸ºæ–‡ä»¶è®¾ç½®äº†é”™è¯¯çš„ MIME ç±»å‹æ—¶ï¼Œæµè§ˆå™¨å¯èƒ½ä¼šé€šè¿‡æŸ¥çœ‹èµ„æºæ¥è¿›è¡Œ  <strong>MIME å—…æ¢</strong>ã€‚</p>
<p>æ¯ä¸€ä¸ªæµè§ˆå™¨åœ¨ä¸åŒçš„æƒ…å†µä¸‹ä¼šæ‰§è¡Œä¸åŒçš„æ“ä½œã€‚ï¼ˆä¾‹å¦‚ï¼ŒSafari ä¼šåœ¨å‘é€çš„ MIME ç±»å‹ä¸åˆé€‚æ—¶æŸ¥çœ‹æ–‡ä»¶çš„æ‰©å±•åã€‚ï¼‰ç”±äºæŸäº› MIME ç±»å‹å¯èƒ½ä»£è¡¨å¯æ‰§è¡Œå†…å®¹ï¼Œä¼šå­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¾¿ä¼šè‡ªè¡ŒçŒœæµ‹å¹¶è®¾ç½® MIME ç±»å‹ã€‚ä½†æ˜¯è¿™æ ·åšæ˜¯ä¸è§„èŒƒä¸”ä¸å®‰å…¨çš„ï¼Œä¸ºäº†é˜²æ­¢è¿™ç§è¡Œä¸ºï¼Œåç«¯å¯ä»¥è®¾ç½®  <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Content-Type-Options" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Content-Type-Options"><code>X-Content-Type-Options</code></a>  ä¸º  <code>nosniff</code>ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆéœ€è¦é¿å…æµè§ˆå™¨å—…æ¢ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥æŸ¥çœ‹ ğŸ‘‰ <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FLearn%2FServer-side%2FConfiguring_server_MIME_types%23%25E4%25B8%25BA%25E4%25BD%2595%25E6%25B5%258F%25E8%25A7%2588%25E5%2599%25A8%25E4%25B8%258D%25E5%25BA%2594%25E8%25AF%25A5%25E7%258C%259C%25E6%25B5%258B_mime_%25E7%25B1%25BB%25E5%259E%258B" title="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Configuring_server_MIME_types#%E4%B8%BA%E4%BD%95%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E5%BA%94%E8%AF%A5%E7%8C%9C%E6%B5%8B_mime_%E7%B1%BB%E5%9E%8B">ä¸ºä½•æµè§ˆå™¨ä¸åº”è¯¥çŒœæµ‹ MIME ç±»å‹</a>ã€‚</p>
<h2 id="FAQï¼ša-download-å¤±æ•ˆæ’æŸ¥åŸå› "><a href="#FAQï¼ša-download-å¤±æ•ˆæ’æŸ¥åŸå› " class="headerlink" title="FAQï¼ša download å¤±æ•ˆæ’æŸ¥åŸå› "></a>FAQï¼ša download å¤±æ•ˆæ’æŸ¥åŸå› </h2><p>åŸå› ä¸€ï¼šå› ä¸ºè·¨åŸŸï¼ŒçœŸçš„å¤±æ•ˆäº†ï¼›</p>
<p>åŸå› äºŒï¼šç”Ÿæ•ˆäº†ï¼Œä½†è¢« Dispoistion çš„ filename ç»™è¦†ç›–äº†ï¼›</p>
<p>è§£å†³æ€è·¯ï¼šå‚è€ƒæ€»ç»“ ğŸ‘‡</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol>
<li><code>Content-Disposition</code> ä¸º <code>attachment</code>ï¼Œæ— è®ºå“ªç§æ–¹å¼ï¼Œéƒ½èƒ½ç›´æ¥ä¸‹è½½ï¼›<ul>
<li>ä¼˜ç‚¹ï¼šæ–¹ä¾¿ï¼›</li>
<li>ç¼ºç‚¹ï¼šå¦‚æœæŒ‡å®šäº† filenameï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼Œå‰ç«¯æ— æ³•ç›´æ¥ä¿®æ”¹æ–‡ä»¶åï¼Œé™¤éè½¬ <code>blob:</code> æˆ– <code>data:</code> å†åˆ©ç”¨ a download ä¸‹è½½å¹¶ä¿®æ”¹</li>
</ul>
</li>
<li><code>Content-Disposition</code> æ²¡æœ‰è®¾ç½®ï¼ˆé»˜è®¤ <code>inline</code>ï¼‰<ul>
<li>åŒæºç›´æ¥ä½¿ç”¨ <code>&lt;a&gt; download</code> ä¸‹è½½ï¼›</li>
<li>è·¨åŸŸå°±å…ˆè·å– <code>blob</code>ï¼Œç”¨ <code>createObjectURL</code> æˆ– <code>readAsDataURL</code> è¯»å–é“¾æ¥ï¼Œå†ç”¨ <code>&lt;a&gt; download</code> ä¸‹è½½ã€‚</li>
</ul>
</li>
<li>æœ‰äº›ç‰¹æ®Šæ ¼å¼çš„èµ„æºï¼ˆæ¯”å¦‚ Excel è¡¨æ ¼ï¼‰ï¼Œåªéœ€æ­£ç¡®è®¾ç½®å¯¹åº”çš„ <code>Content-Type</code>ï¼Œå³å¯é€šè¿‡ <code>Doc</code> ç±»å‹çš„ HTTP è¯·æ±‚ç›´æ¥è§¦å‘æµè§ˆå™¨çš„ä¸‹è½½è¡Œä¸ºã€‚</li>
</ol>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><ul>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTML%2FElement%2Fa" title="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/a"><code>&lt;a&gt;</code>é”šå…ƒç´  | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FContent-Disposition" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition">Content-Disposition | MDN</a></li>
<li><a href="https://juejin.cn/post/7207078219215732794#heading-14" target="_blank" rel="noopener" title="https://juejin.cn/post/7207078219215732794#heading-14">PDF é¢„è§ˆå’Œä¸‹è½½ä½ æ˜¯æ€ä¹ˆå®ç°çš„</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fzh.javascript.info%2Fblob" title="https://zh.javascript.info/blob">Blob | ç°ä»£ JavaScript æ•™ç¨‹</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FURL%2FcreateObjectURL_static" title="https://developer.mozilla.org/zh-CN/docs/Web/API/URL/createObjectURL_static">URL.createObjectURL | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FURL%2FrevokeObjectURL_static" title="https://developer.mozilla.org/zh-CN/docs/Web/API/URL/revokeObjectURL_static">URL.revokeObjectURL | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FData_URLs" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/Data_URLs">Data URL | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FFileReader" title="https://developer.mozilla.org/zh-CN/docs/Web/API/FileReader">FileReader | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FXMLHttpRequest%2FresponseType" title="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/responseType">XMLHttpRequest.responseType | MDN</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.cnblogs.com%2Fjann8%2Fp%2F17472129.html" title="https://www.cnblogs.com/jann8/p/17472129.html">HTTP çš„å‡ ç§ç±»å‹</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FMIME_types%2FCommon_types" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types">å¸¸è§ MIME ç±»å‹è¡¨</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fwww.iana.org%2Fassignments%2Fmedia-types%2Fmedia-types.xhtml" title="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME types åˆ—è¡¨</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FMIME_types%23mime_%25E5%2597%2585%25E6%258E%25A2" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types#mime_%E5%97%85%E6%8E%A2">MIME å—…æ¢</a></li>
<li><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FHeaders%2FX-Content-Type-Options" title="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/X-Content-Type-Options">X-Content-Type-Options</a></li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">å°é»‘</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://yoursite.com/2024/01/31/%E5%89%8D%E7%AB%AF/%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BC%9A%E7%94%A8%20a%20%E6%A0%87%E7%AD%BE%E4%B8%8B%E8%BD%BD%E5%90%97/">http://yoursite.com/2024/01/31/å‰ç«¯/ä½ çœŸçš„ä¼šç”¨ a æ ‡ç­¾ä¸‹è½½å—/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://yoursite.com" target="_blank">å°é»‘çš„å°ç«™</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/vue.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="æ”¯ä»˜å¯¶"/><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2024/02/08/%E6%9D%82%E9%A1%B9/mac%E5%B7%A5%E5%85%B7%E6%8E%A8%E8%8D%90/"><img class="prev_cover lazyload" data-src="/img/vue.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">æ‚é¡¹/macå·¥å…·æ¨è</div></div></a></div><div class="next-post pull_right"><a href="/2024/01/26/%E6%9D%82%E9%A1%B9/%E4%B8%80%E5%A5%97%E9%94%AE%E9%BC%A0%E6%8E%A7%E5%88%B6%20win%20%E5%92%8C%20mac/"><img class="next_cover lazyload" data-src="/img/react.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">æ‚é¡¹/ä¸€å¥—é”®é¼ æ§åˆ¶ win å’Œ mac</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By å°é»‘</div><div class="footer_custom_text">Hi, welcome to my <a href="http://ynxh.xyz/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢" target="_self">2</a><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/click_heart.js"></script></body></html>